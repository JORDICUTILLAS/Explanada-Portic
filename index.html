<html lang="es">
<head>		
	<meta charset="UTF-8">
	<link rel="shortcut icon" href="http://www.portic.net/fav.ico">    
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href='https://fonts.googleapis.com/css?family=Raleway:400,100,300,200,500,600,800,900,700' rel='stylesheet' type='text/css'>   	
	<title>Azuqueca</title>	
	<link rel="stylesheet" href="styles.css">
</head>
<body>
	<!--<img class="img_map" src="img/azuqueca_map.jpg">-->
	<div class="content_map" id="content_map">
		<div class="options">		
			<input type="radio" id="mapa" name="selection" value="Camion">MAPA
			<input type="radio" id="sat" name="selection" value="Tren">SATÉLITE
			<img src="img/refresh.png" class="refresh">
		</div>
		
		<div>
			<div class="position_1" id="position_1">
				
			</div>
			<div id="percent_1" class="percent_1">

			</div>
			<div class="result_position_1" id="result_position_1">
				<p>3 contenedores, 2 slots disponibles</p>
				<p class="close" id="close">x</p>

				

			</div>
		</div>

		<div class="position_2" id="position_2">			
			
		</div>
		<div id="percent_2" class="percent_1">

		</div>
		<div class="result_position_2" id="result_position_2">
			<p>3 contenedores, 2 slots disponibles</p>
			<p class="close" id="close2">x</p>

			<table class="table_A1" id="table_A2" style="width:100%">
				<tr>
					<td>MSKU1112225 </td>
					<td>MSKU1112225 </td>		
					<td></td>
				</tr>
				<tr>
					<td></td>
					<td></td>		
					<td>MSKU1112225</td>
				</tr>
				<tr>
					<td>MSKU1112225</td>
					<td></td>		
					<td></td>
				</tr>
			</table>
		</div>

		<div class="position_3" id="position_3">			
			
		</div>
		<div id="percent_3" class="percent_1">

		</div>
		<div class="result_position_3" id="result_position_3">
			<p>3 contenedores, 2 slots disponibles</p>
			<p class="close" id="close3">x</p>

			<table class="table_A1" id="table_A3" style="width:100%">
				<tr>
					<td></td>
					<td>MSKU1112225 MSKU1112225 MSKU1112225</td>		
					<td></td>
				</tr>
				<tr>
					<td></td>
					<td>MSKU1112225 MSKU1112225</td>		
					<td></td>
				</tr>
				<tr>
					<td>MSKU1112225</td>
					<td></td>		
					<td></td>
				</tr>
			</table>
		</div>

	</div>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
	<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js"></script>
	
	<script type="text/javascript">
	$(document).ready(function() {
		$('#mapa').click(function(){
			$('#content_map').css('background-image', ' url(img/azuqueca_map.jpg)');
		});                       
	});

	$(document).ready(function() {
		$('#sat').click(function(){
			$('#content_map').css('background-image', ' url(img/azuqueca_sat.jpg)');
		});                       
	});	
	
	</script>

	<script type="text/javascript">	
	$("#position_1").click(function () {		
		if ($('#position_1').hasClass('display_position_1')){
			$('#result_position_1').removeClass('display_position_1');		
		}
		else{
			$('#result_position_1').addClass('display_position_1');
			$('#result_position_2').removeClass('display_position_1');
			$('#result_position_3').removeClass('display_position_1');
		}
	});
	</script>

	<script type="text/javascript">	
	$("#position_2").click(function () {		
		if ($('#position_2').hasClass('display_position_1')){
			$('#result_position_2').removeClass('display_position_1');
		}
		else{
			$('#result_position_2').addClass('display_position_1');
			$('#result_position_1').removeClass('display_position_1');
			$('#result_position_3').removeClass('display_position_1');
		}
	});
	</script>

	<script type="text/javascript">	
	$("#position_3").click(function () {		
		if ($('#position_3').hasClass('display_position_1')){
			$('#result_position_3').removeClass('display_position_1');
		}
		else{
			$('#result_position_3').addClass('display_position_1');
			$('#result_position_2').removeClass('display_position_1');
			$('#result_position_1').removeClass('display_position_1');
		}
	});
	</script>

	<script type="text/javascript">	
	$("#close").click(function () {		
		if ($('#position_1').hasClass('display_position_1')){
			$('#result_position_1').addClass('display_position_1');		
		}
		else{
			$('#result_position_1').removeClass('display_position_1');
		}
	});
	</script>
	<script type="text/javascript">	
	$("#close2").click(function () {		
		if ($('#position_2').hasClass('display_position_1')){
			$('#result_position_2').addClass('display_position_1');
		}
		else{
			$('#result_position_2').removeClass('display_position_1');
		}
	});
	</script>

	<script type="text/javascript">	
	$("#close3").click(function () {		
		if ($('#position_3').hasClass('display_position_1')){
			$('#result_position_3').addClass('display_position_1');
		}
		else{
			$('#result_position_3').removeClass('display_position_1');
		}
	});
	</script>


		<!-- HOVER PORCENTAJES-->
	<script type="text/javascript">	
	$("#position_1").mouseenter(function () {		
		$('#percent_1').show();
	});

	$("#position_1").mouseout(function () {		
		$('#percent_1').hide();
	});

	$("#position_2").mouseenter(function () {		
		$('#percent_2').show();
	});

	$("#position_2").mouseout(function () {		
		$('#percent_2').hide();
	});

	$("#position_3").mouseenter(function () {		
		$('#percent_3').show();
	});

	$("#position_3").mouseout(function () {		
		$('#percent_3').hide();
	});
	</script>

	<script type="text/javascript">	
	$.ajax({
		url:'zona.json',
		dataType: 'json',
		type:'get',
		cache: false,
		success:  function(data){
			console.log(data);
			$(data.ZONAS).each(function(index, value){				
				var pot = index+1;
				var capa = index+1;
				var nombre_zona = (value.ZONA);
				$('#position_'+ pot).append(value.ZONA);
				$('#percent_'+ pot).append( Math.round((value.OCUPADAS * 100  / value.CAPACIDAD)) + "%");
				var raiz = Math.round(Math.sqrt(value.CAPACIDAD));
				var html = ''
				var contador = 0 ;
				for (var i=1;  i<=(value.CAPACIDAD); i+=raiz){
					
					html += '<tr>'
					for(var ii=1;  ii<=(raiz) && contador<(value.CAPACIDAD); ii++) {						
							contador ++					 
                            html += '<td></td>' 
					}
					html += '</tr>'											
				}		
				$('#table_'+ nombre_zona).html(html);
				$( "td:parent" )  
					.css( "background", "#891919" );
					$( "td:empty" )  
					.css( "background", "#75890c" );
			});
		},
		error : function(xhr, status) {
			alert('Disculpe, existió un problema'+estatus);
		}
	});

	</script>
	
</body>	
</html>